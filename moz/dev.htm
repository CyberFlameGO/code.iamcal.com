<h1>Developing the Flickr Uploader Bar</h1>

<h2>Getting the source</h2>

<ol>
	<li> Make sure you've uninstalled the extension - restart firefox and make sure it's not on the extensions list</li>
	<li> Grab a copy of the <a href="flickrBar-1.1.3-src.zip">source package</a></li>
	<li> Unzip it on your local machine</li>
	<li> Edit the file 'flickrbar@moz.code.iamcal.com' to point to the location you unzipped the files in. Ensure you leave the trailing slash intact.</li>
	<li> Open up your Firefox profile folder. On windows you can do this by typing this in the 'Run' box: "%APPDATA%\Mozilla\Firefox\Profiles". There'll be a weirdly named folder (or two) there - inside that, there's a folder called 'extensions' (if not, create it).</li>
	<li> Copy the 'flickrbar@moz.code.iamcal.com' file into the extensions folder.</li>
	<li> Restart firefox - the extension should now be 'installed'.</li>
	<li> Any changes made to the source are now availabale in Firefox without reinstalling.</li>
</ol>


<h2>Tips and tricks</h2>

<ul>
	<li> Download the <a href="http://ted.mielczarek.org/code/mozilla/extensiondev/">Extension Developer Extension</a> - it lets you reload chrome without restarting. That means no more restarting Firefox when you make a change to the source.</li>
	<li> Set up these debugging preferences (through about:config):
		<ul>
			<li>browser.dom.window.dump.enabled = true</li>
			<li>javascript.options.showInConsole = true</li>
			<li>javascript.options.strict = true (may overwhelm you with errors)</li>
			<li>nglayout.debug.disable_xul_cache = true</li>
			<li>nglayout.debug.disable_xul_fastload = true</li>
		</ul>
	</li>
	
</ul>


<h2>Packaging the extension</h2>

<p>I currently do this with an ant script - i'm going to try and automate this a little better before sharing it.</p>


<h2>Known bugs / obviously missing features</h2>

<ul>
	<li> Drag and drop doesn't seem to work on OSX - no idea why</li>
	<li> Error conditions are handled badly, when they're handled at all</li>
	<li> We should copy dragged files to a temp folder to avoid them being deleted out from under us</li>
	<li> We should persist the photo queue between browser restarts</li>
	<li> Styling of the hover state for the thin bar is awful</li>
	<li> The main bar current has no good drag state / drop indicator</li>
	<li> Settings dialog looks like ass on OSX - the headers don't render</li>
	<li> 'Auto clear' option should explain that it doesn't delete the source file</li>
	<li> Sometimes thumbnail generation hangs, blocking the thumb queue</li>
	<li> Logout link should probably log you out of flickr too</li>
	<li> 'Off' state graphic for scrolling arrows look like ass</li>
	<li> Need a greyed-out version of the status icon from when the uploader is hidden</li>
	<li> Need a preference for a toolbar button and to completely hide the bar when not in use (toolbar or status bar icon triggers the whole thing)</li>
</ul>
